version: '3'

services:

  dh1:
    build: hello-world-service-1/.
    image: whoan/hello_world_service-1:latest
    depends_on:
      - redis
    environment:
      API_PORT: 80

  dh_2:
    build:
      context: hello-world-service-2/.
      dockerfile: Dockerfile-custom
    image: whoan/hello_world_service-2
    restart: always

  ignored:
    build:
      context: ignored/.
      dockerfile: Dockerfile
    image: unexistent/foo/bar/baz:latest

  gh:
    build:
      context: .
      dockerfile: Dockerfile-gh
    image: docker.pkg.github.com/whoan/hello-world/gh:latest

  gh_2:
    build:
      context: .
      dockerfile: Dockerfile-gh2
    image: docker.pkg.github.com/whoan/hello-world/gh-2:latest

  gh_new_1:
    build: .
    image: ghcr.io/whoan/some-thing:latest

  gh_new_2:
    build: .
    image: ghcr.io/whoan/some:latest

  redis:
    image: redis:5
